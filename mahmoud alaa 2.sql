

CREATE TABLE DEPARTMENT (
    DNumber INT PRIMARY KEY,
    DName VARCHAR(20) UNIQUE,
    Location VARCHAR(250),
    ManagerSSN INT,
   StartDate DATE
);

CREATE TABLE EMPLOYEE (
    SSN INT PRIMARY KEY,
    Fname VARCHAR(50),
    Lname VARCHAR(50),
    Bdate DATE,
    Gender CHAR(1),
    SupervisorSSN INT,
    Dno INT,
    FOREIGN KEY (SupervisorSSN) REFERENCES EMPLOYEE(SSN),
    FOREIGN KEY (Dno) REFERENCES DEPARTMENT(DNumber)
);

CREATE TABLE PROJECT (
    PNumber INT PRIMARY KEY,
    PName VARCHAR(30),
    Location VARCHAR(60),
    Dnum INT,
    FOREIGN KEY (Dnum) REFERENCES DEPARTMENT(DNumber)
);

CREATE TABLE DEPENDENT (
    Essn INT,
    DependentName VARCHAR(50),
    Gender CHAR(1),
    Bdate DATE,
    PRIMARY KEY (Essn, DependentName),
    FOREIGN KEY (Essn) REFERENCES EMPLOYEE(SSN)
);

CREATE TABLE WORKS_ON (
    Essn INT,
    Pno INT,
    Hours FLOAT,
    PRIMARY KEY (Essn, Pno),
    FOREIGN KEY (Essn) REFERENCES EMPLOYEE(SSN),
    FOREIGN KEY (Pno) REFERENCES PROJECT(PNumber)
);

INSERT INTO DEPARTMENT VALUES (1, 'IT', 'Cairo', NULL, '2025-7-05');
INSERT INTO DEPARTMENT VALUES (2, 'HR', 'Alex', NULL, '2025-7-05');
INSERT INTO DEPARTMENT VALUES (3, 'Finance', 'Giza', NULL, '2025-7-05');


INSERT INTO EMPLOYEE VALUES (101, 'khaled', 'Ali', '1990-05-10', 'M', NULL, 1);
INSERT INTO EMPLOYEE VALUES (102, 'eman', 'Yousef', '1992-07-22', 'F', 101, 1);
INSERT INTO EMPLOYEE VALUES (103, 'Mohamed', 'Hassan', '1988-01-17', 'M', 101, 2);
INSERT INTO EMPLOYEE VALUES (104, 'Nada', 'Kamal', '1995-09-12', 'F', 103, 3);
INSERT INTO EMPLOYEE VALUES (105, 'ali', 'Sami', '1993-11-03', 'M', 104, 3);


INSERT INTO PROJECT VALUES (201, 'Website Revamp', 'Cairo', 1);
INSERT INTO PROJECT VALUES (202, 'Recruitment Campaign', 'Alexandria', 2);
INSERT INTO PROJECT VALUES (203, 'Budget Planning', 'Giza', 3);

INSERT INTO WORKS_ON VALUES (101, 201, 10);
INSERT INTO WORKS_ON VALUES (102, 201, 15);
INSERT INTO WORKS_ON VALUES (103, 202, 20);
INSERT INTO WORKS_ON VALUES (104, 203, 8);
INSERT INTO WORKS_ON VALUES (105, 203, 12);

INSERT INTO DEPENDENT VALUES (101, 'Mona', 'F', '2010-02-10');
INSERT INTO DEPENDENT VALUES (102, 'Kareem', 'M', '2012-06-05');



UPDATE EMPLOYEE
SET Dno = 2
WHERE SSN = 105;


DELETE FROM DEPENDENT
WHERE Essn = 102 AND DependentName = 'Kareem';


SELECT Fname, Lname
FROM EMPLOYEE
WHERE Dno = 1;


